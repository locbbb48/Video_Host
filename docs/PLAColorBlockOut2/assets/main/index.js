System.register("chunks:///_virtual/Block.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum.ts","./Door.ts","./PosCheck.ts","./GridManager.ts","./Grid.ts","./BlockManager.ts","./SoundManager.ts"],(function(t){var o,e,n,i,r,l,a,s,c,d,u,h,p,f,w,g,m,v,b,y,C,O,P;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){l=t.cclegacy,a=t._decorator,s=t.Sprite,c=t.Enum,d=t.Node,u=t.Vec3,h=t.Collider2D,p=t.Contact2DType,f=t.tween,w=t.Component},function(t){g=t.cType,m=t.Colors},function(t){v=t.Door},function(t){b=t.PosCheck},function(t){y=t.GridManager},function(t){C=t.Grid},function(t){O=t.BlockManager},function(t){P=t.SoundManager}],execute:function(){var k,N,S,M,B,D,F,z,L,x,E,G,I,T,R,_,V,A,W,U,j,H,X,J,K,Q,Y;l._RF.push({},"9a850AYxQJGD4/XGKmONvct","Block",void 0);var q=a.ccclass,Z=a.property,$=a.executeInEditMode;t("Block",(k=q("Block"),N=Z(s),S=Z(s),M=Z({type:c(g)}),B=Z(d),D=Z(d),F=Z(d),z=Z(d),L=Z(d),x=Z(u),k(E=$((I=o((G=function(t){function o(){for(var o,e=arguments.length,r=new Array(e),l=0;l<e;l++)r[l]=arguments[l];return o=t.call.apply(t,[this].concat(r))||this,n(o,"blockSprite",I,i(o)),n(o,"borderSprite",T,i(o)),n(o,"type",R,i(o)),o._lastType=g.RED,n(o,"door",_,i(o)),n(o,"left",V,i(o)),n(o,"right",A,i(o)),n(o,"up",W,i(o)),n(o,"down",U,i(o)),n(o,"offsetLeft",j,i(o)),n(o,"offsetRight",H,i(o)),n(o,"offsetUp",X,i(o)),n(o,"offsetDown",J,i(o)),n(o,"canMove",K,i(o)),o.listNodeOwnFrame=[],n(o,"oldPosition",Q,i(o)),n(o,"isConstraint",Y,i(o)),o}e(o,t);var l=o.prototype;return l.onLoad=function(){this.borderSprite&&(this.borderSprite.node.active=!1),this.blockSprite||(this.blockSprite=this.getComponent(s)),this.updateColor(),this.oldPosition=this.node.worldPosition.clone(),this.canMove=!0;var t=this.getComponent(h);t&&(t.on(p.PRE_SOLVE,this.onStayContact,this),t.on(p.END_CONTACT,this.onExitContact,this))},l.start=function(){this.initListNodeOwn(),this.setToClosestGrid(),this.InitDataOfListNodeOwnFrame()},l.update=function(){this._lastType!==this.type&&(this.updateColor(),this._lastType=this.type)},l.SetBorder=function(){this.borderSprite?this.borderSprite.node.active=!0:console.warn("Border sprite is null")},l.ClearBorder=function(){this.borderSprite?this.borderSprite.node.active=!1:console.warn("Border sprite is null")},l.updateColor=function(){this.blockSprite.color=m[this.type]},l.onStayContact=function(t,o,e){var n=o.node.getComponent(v);n&&!1!==this.node.active&&n.type===this.type&&this.canPassDoor(n)&&(this.door||(this.door=o.node))},l.onExitContact=function(t,o,e){var n=o.node.getComponent(v);n&&!1!==this.node.active&&n.type===this.type&&this.door&&this.door===o.node&&(this.door=null)},l.canPassDoor=function(t){var o=t.getAdjacentGridPositions();if(!o.length)return!1;var e=this.getBlockSizeOnGrid(),n=t.dirType,i=t.length,l=1===n||3===n?e.length:e.width;if(l>i)return!1;for(var a,s=new Set(o.map((function(t){return t.row+"-"+t.col}))),c=this.listNodeOwnFrame.map((function(t){var o=t.getComponent(b);return o.rowOwn+"-"+o.colOwn})),d=0,u=r(c);!(a=u()).done;){var h=a.value;s.has(h)&&d++}return d>=l},l.getBlockSizeOnGrid=function(){if(!this.listNodeOwnFrame.length)return{width:0,length:0};var t=this.listNodeOwnFrame.map((function(t){return t.getComponent(b).rowOwn})),o=this.listNodeOwnFrame.map((function(t){return t.getComponent(b).colOwn})),e=Math.min.apply(Math,t),n=Math.max.apply(Math,t),i=Math.min.apply(Math,o);return{width:Math.max.apply(Math,o)-i+1,length:n-e+1}},l.initListNodeOwn=function(){this.listNodeOwnFrame=this.node.children.filter((function(t){return t.getComponent(b)}))},l.InitDataOfListNodeOwnFrame=function(){this.listNodeOwnFrame.forEach((function(t){return t.getComponent(b).InitDataPos()}))},l.setToClosestGrid=function(){if(this.listNodeOwnFrame.length){var t=this.listNodeOwnFrame[0],o=t.getComponent(b).FindNodeCloset();if(!o)return this.node.setWorldPosition(this.oldPosition),this.InitDataOfListNodeOwnFrame(),void console.warn("Block Backed to OldPos");var e=new u(o.worldPosition.x-t.worldPosition.x,o.worldPosition.y-t.worldPosition.y,0);if(this.node.setWorldPosition(this.node.worldPosition.clone().add(e)),this.InitDataOfListNodeOwnFrame(),this.isOverlappingOtherBlock())return this.node.setWorldPosition(this.oldPosition),void console.warn("Block Backed to OldPos");this.door&&this.canPassDoor(this.door.getComponent(v))?this.moveOutIfMatched():this.door=null}},l.moveOutIfMatched=function(){var t,o=this;this.door&&this.door.isValid&&(null==(t=this.door.getComponent(v))?void 0:t.type)===this.type&&(this.canMove=!1,this.scheduleOnce((function(){var t,e=o.door.getComponent(v);P.instance.playSFX("door");var n=e.effect;n&&(n.active=!0);var i=150,r=new u(i,0,0);switch(e.dirType){case 1:r=new u(i,0,0);break;case 2:r=new u(0,-150,0);break;case 3:r=new u(-150,0,0);break;case 4:r=new u(0,i,0)}var l=o.node.worldPosition.clone().add(r);o.listNodeOwnFrame.forEach((function(t){if(t&&t.isValid){var o=t.getComponent(b);o?o.ReBackValue():console.warn("⚠️ Node con không có PosCheck:",t.name)}else console.warn("❌ Node con đã bị destroy hoặc null trong listNodeOwnFrame")})),null==(t=O.instance)||null==t.RemoveBlockInList||t.RemoveBlockInList(o.node),f(o.node).to(1,{worldPosition:l}).call((function(){n&&(n.active=!1),o.node.active=!1})).start()}),.1))},l.getMoveLimit=function(){var t=this,o=y.instance.gridNodes,e=o.length,n=o[0].length,i=this.listNodeOwnFrame.map((function(t){var o=t.getComponent(b);return{row:o.rowOwn,col:o.colOwn}})),l={left:0,right:0,up:0,down:0},a=function(l){for(var a=0;;){a++;for(var s,c,d=i.map((function(t){return{row:"up"===l?t.row+a:"down"===l?t.row-a:t.row,col:"left"===l?t.col-a:"right"===l?t.col+a:t.col}})),u=function(){var r=c.value,l=r.row,s=r.col;if(l<0||l>=e||s<0||s>=n)return{v:a-1};var d,u=o[l][s];if(!i.some((function(t){return t.row===l&&t.col===s}))&&(null!=(d=u.getComponent(C))&&d.CheckOccupied(t.node)))return{v:a-1}},h=r(d);!(c=h()).done;)if(s=u())return s.v}};return l.left=a("left"),l.right=a("right"),this.isConstraint?(l.up=0,l.down=0):(l.up=a("up"),l.down=a("down")),l},l.getWorldLimitPosition=function(t){var o,e,n,i,r=y.instance.gridNodes;if(!r||r.length<2||r[0].length<2)return console.warn("❗ Grid dữ liệu không hợp lệ"),{min:this.node.worldPosition.clone(),max:this.node.worldPosition.clone()};var l=u.distance(r[0][0].worldPosition,r[0][1].worldPosition)/2,a=u.distance(r[0][0].worldPosition,r[1][0].worldPosition)/2,s=null==(o=this.left)||null==(o=o.getComponent(b))?void 0:o.nodeCloset,c=null==(e=this.right)||null==(e=e.getComponent(b))?void 0:e.nodeCloset,d=null==(n=this.up)||null==(n=n.getComponent(b))?void 0:n.nodeCloset,h=null==(i=this.down)||null==(i=i.getComponent(b))?void 0:i.nodeCloset;if(!(s&&c&&d&&h)){console.warn("⚠️ Một trong các hướng không có nodeCloset:",{leftNode:s,rightNode:c,upNode:d,downNode:h});var p=this.node.worldPosition.clone();return{min:p,max:p}}var f,w,g=s.worldPosition.x-(2*t.left+1)*l+this.offsetLeft,m=c.worldPosition.x+(2*t.right+1)*l-this.offsetRight;return this.isConstraint?(f=this.node.worldPosition.y,w=this.node.worldPosition.y):(f=d.worldPosition.y+(2*t.up+1)*a-this.offsetUp,w=h.worldPosition.y-(2*t.down+1)*a+this.offsetDown),{min:new u(g,w,0),max:new u(m,f,0)}},l.isOverlappingOtherBlock=function(){for(var t,o=r(this.listNodeOwnFrame);!(t=o()).done;){var e=t.value.getComponent(b);if(e)if(y.instance.gridNodes[e.rowOwn][e.colOwn].getComponent(C).CheckOccupied(this.node))return!0}return!1},o}(w)).prototype,"blockSprite",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=o(G.prototype,"borderSprite",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=o(G.prototype,"type",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.RED}}),_=o(G.prototype,"door",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=o(G.prototype,"left",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=o(G.prototype,"right",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=o(G.prototype,"up",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=o(G.prototype,"down",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=o(G.prototype,"offsetLeft",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),H=o(G.prototype,"offsetRight",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),X=o(G.prototype,"offsetUp",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),J=o(G.prototype,"offsetDown",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),K=o(G.prototype,"canMove",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Q=o(G.prototype,"oldPosition",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),Y=o(G.prototype,"isConstraint",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=G))||E)||E));l._RF.pop()}}}));

System.register("chunks:///_virtual/BlockManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./TextEffect.ts"],(function(t){var e,n,o,i,r,c,l,a,s,u,f,h,k;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose,c=t.createClass},function(t){l=t.cclegacy,a=t._decorator,s=t.Node,u=t.Component},function(t){f=t.GameEvent,h=t.GameManager},function(t){k=t.TextEffect}],execute:function(){var p,B,d,b,g,v,m,y,M;l._RF.push({},"43a99kpaDVAqIhBnMbJLaBj","BlockManager",void 0);var C=a.ccclass,E=a.property;t("BlockManager",(p=C("BlockManager"),B=E([s]),d=E(k),p(((M=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r))||this,o(e,"listBlock",v,i(e)),e.totalBlocks=0,o(e,"blockUsedCount",m,i(e)),o(e,"textEffect",y,i(e)),e}n(e,t);var l=e.prototype;return l.onLoad=function(){e._instance=this,this.Init()},l.Init=function(){var t=this;this.node.children.forEach((function(e){t.listBlock.push(e),t.totalBlocks++}))},l.RemoveBlockInList=function(t){this.textEffect.playRandomEffect();var e=this.listBlock.indexOf(t);e>-1&&this.listBlock.splice(e,1),this.blockUsedCount>=0&&this.blockUsedCount--,this.CheckNoMoreBlock()&&f.emit("no-more-block",h.instance.currentLevel),this.blockUsedCount<=0&&h.instance.GameOver()},l.CheckNoMoreBlock=function(){return 0==this.listBlock.length},l.getAllBlocks=function(){for(var t,e=r(this.listBlock);!(t=e()).done;){t.value;return this.listBlock}},c(e,null,[{key:"instance",get:function(){return this._instance}}]),e}(u))._instance=void 0,v=e((g=M).prototype,"listBlock",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=e(g.prototype,"blockUsedCount",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),y=e(g.prototype,"textEffect",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=g))||b));l._RF.pop()}}}));

System.register("chunks:///_virtual/DetectPlatform.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StoreLinkOS.ts"],(function(t){var e,n,o,r,i,c,a;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){o=t.cclegacy,r=t._decorator,i=t.sys,c=t.Component},function(t){a=t.StoreLinkOS}],execute:function(){var l;o._RF.push({},"0201aF+gfRDC6eVBArC1m5p","DetectPlatform",void 0);var s=r.ccclass;r.property,t("default",s(l=function(t){function o(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this)._currentLink=null,e}e(o,t);var r=o.prototype;return r.onLoad=function(){this.detectPlatform()},r.detectPlatform=function(){i.os===i.OS.IOS?this.SetLink(a.IOS_LINK):this.SetLink(a.ANDROID_LINK)},r.SwitchToStore=function(){if(this._currentLink){var t=this._currentLink;if(i.isNative)i.openURL(t);else{if(i.platform==i.Platform.IOS)try{window.location.href=t}catch(t){console.error("Failed to use window.location.href",t)}try{window.open(t,"_blank")}catch(t){console.error("Failed to use window.open with _blank",t)}try{var e=document.createElement("a");e.href=t,e.target="_blank",document.body.appendChild(e),e.click(),document.body.removeChild(e)}catch(t){console.error("Failed to use anchor tag method",t)}}}},r.SetLink=function(t){this._currentLink=t},n(o,[{key:"currentLink",get:function(){return this._currentLink}}]),o}(c))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/Door.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum.ts"],(function(t){var e,i,o,n,r,l,c,a,u,s,p,f,h,b,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty,o=t.inheritsLoose,n=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,c=t.Sprite,a=t.Enum,u=t.Color,s=t.Node,p=t.BoxCollider,f=t.tween,h=t.Component},function(t){b=t.cType,d=t.Colors}],execute:function(){var y,g,w,m,k,C,T,_,D,G,S,v,z,E,I,P,x,B,F;r._RF.push({},"08d67tsGGJCd4TPGDNvFMwk","Door",void 0);var R=l.ccclass,j=l.property,A=l.executeInEditMode,L=(l.type,t("DoorGridInfo",R("DoorGridInfo")((w=e((g=function(){i(this,"row",w,this),i(this,"col",m,this)}).prototype,"row",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=e(g.prototype,"col",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=g))||y));t("Door",(k=R("Door"),C=j({type:c}),T=j({type:a(b),tooltip:"Choose door color"}),_=j(u),D=j(s),G=j({type:[L],tooltip:"Nhập thủ công row/col các grid mà door sử dụng"}),k(S=A((z=e((v=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,i(e,"blockSprite",z,n(e)),i(e,"type",E,n(e)),e._lastType=b.RED,i(e,"changColor",I,n(e)),i(e,"dirType",P,n(e)),i(e,"length",x,n(e)),i(e,"effect",B,n(e)),i(e,"manualGridInfos",F,n(e)),e._blinkTween=null,e}o(e,t);var r=e.prototype;return r.onLoad=function(){this.blockSprite||(this.blockSprite=this.getComponent(c)),this.updateColor(),this.effect&&(this.effect.active=!1)},r.start=function(){this.node.getComponent(p);this.getAdjacentGridPositions()},r.update=function(){this._lastType!==this.type&&(this.updateColor(),this._lastType=this.type)},r.updateColor=function(){this.blockSprite&&(this.blockSprite.color=d[this.type])},r.getAdjacentGridPositions=function(){return this.manualGridInfos&&this.manualGridInfos.length>0?this.manualGridInfos.map((function(t){return{row:t.row,col:t.col}})):[]},r.onCollisionEnter=function(t){},r.onCollisionExit=function(t){},r.startBlinkEffect=function(){if(this.blockSprite){var t=d[this.type],e=this.changColor;this._blinkTween&&this._blinkTween.stop(),this._blinkTween=f(this.blockSprite).repeatForever(f().to(.1,{color:e}).to(.3,{color:t})).start()}},r.stopBlinkEffect=function(){this._blinkTween&&(this._blinkTween.stop(),this._blinkTween=null),this.blockSprite&&(this.blockSprite.color=d[this.type])},e}(h)).prototype,"blockSprite",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(v.prototype,"type",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.RED}}),I=e(v.prototype,"changColor",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u(255,255,255,255)}}),P=e(v.prototype,"dirType",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),x=e(v.prototype,"length",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),B=e(v.prototype,"effect",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(v.prototype,"manualGridInfos",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=v))||S)||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/Enum.ts",["cc"],(function(e){var n,E;return{setters:[function(e){n=e.cclegacy,E=e.Color}],execute:function(){var t;n._RF.push({},"ee6b2MoZp1Pi77GewqB9CXy","Enum",void 0);var L=e("cType",function(e){return e[e.RED=0]="RED",e[e.GREEN=1]="GREEN",e[e.BLUE=2]="BLUE",e[e.YELLOW=3]="YELLOW",e[e.PURPLE=4]="PURPLE",e[e.ORANGE=5]="ORANGE",e[e.CYAN=6]="CYAN",e[e.PINK=7]="PINK",e[e.LIGHTBLUE=8]="LIGHTBLUE",e[e.GRAY=9]="GRAY",e}({}));e("Colors",((t={})[L.RED]=new E(240,83,83,255),t[L.GREEN]=new E(145,236,36,255),t[L.BLUE]=new E(0,102,255,255),t[L.YELLOW]=new E(255,229,0,255),t[L.PURPLE]=new E(191,0,255,255),t[L.ORANGE]=new E(255,138,0,255),t[L.CYAN]=new E(95,235,235,255),t[L.PINK]=new E(238,60,178,255),t[L.LIGHTBLUE]=new E(78,182,240,255),t[L.GRAY]=new E(135,135,135,255),t)),e("TypeDirection",function(e){return e[e.Up=1]="Up",e[e.Down=2]="Down",e[e.Left=3]="Left",e[e.Right=4]="Right",e}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DetectPlatform.ts","./Super_html_script.ts","./super_html_playable.ts","./SoundManager.ts"],(function(e){var n,t,i,a,r,o,l,c,s,u,p,d,h,m,f,v,w,g,y,S,b;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.createClass},function(e){o=e.cclegacy,l=e._decorator,c=e.EventTarget,s=e.Camera,u=e.Canvas,p=e.Node,d=e.RichText,h=e.PhysicsSystem2D,m=e.tween,f=e.Vec3,v=e.UIOpacity,w=e.Component},function(e){g=e.default},function(e){y=e.Super_html_script},function(e){S=e.default},function(e){b=e.SoundManager}],execute:function(){var _,k,G,L,C,P,M,z,T,D,x,W,O,R,E,H,N,B,F,j,q,I;o._RF.push({},"f99aaY0UCBNqqEimxPXpL3/","GameManager",void 0);var U=l.ccclass,X=l.property,A=e("GameEvent",new c);e("GameManager",(_=U("GameManager"),k=X(s),G=X(u),L=X(p),C=X(d),P=X(p),M=X(p),z=X(p),T=X(g),D=X(y),_(((I=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return n=e.call.apply(e,[this].concat(r))||this,i(n,"MainCamera",O,a(n)),i(n,"MainCanvas",R,a(n)),i(n,"Hand",E,a(n)),i(n,"RichtextDownLoad",H,a(n)),i(n,"level1",N,a(n)),i(n,"level2",B,a(n)),i(n,"redscreen",F,a(n)),n.checkFirst=!1,n.checkCanTouch=!0,n.isWin=!1,i(n,"detectPlatform",j,a(n)),i(n,"super_html_script",q,a(n)),n.currentLevel=1,n}t(n,e);var o=n.prototype;return o.onLoad=function(){var e=this;this.detectPlatform.detectPlatform(),window.SuperGamespace||(window.SuperGamespace={isWinning:{isWin:!1},linkStore:{linkStore:this.detectPlatform.currentLink}}),console.log("🔗 Store Link:",window.SuperGamespace.linkStore.linkStore),h.instance.enable=!0,null==h.instance.syncSceneToPhysics||h.instance.syncSceneToPhysics(),n._instance=this,window.onerror=function(){e.GameOver()},window.addEventListener("unhandledrejection",(function(){e.GameOver()})),this.level2.active=!1,this.RichtextDownLoad.string="Play Now",this.TweenLevel(this.level1),A.on("no-more-block",this.onNoMoreBlock,this)},o.dispatchGameStatusChanged=function(){var e=new CustomEvent("gameStatusChanged",{detail:{isWin:window.SuperGamespace.isWinning.isWin,linkStore:window.SuperGamespace.linkStore.linkStore}});window.dispatchEvent(e),console.log("📢 gameStatusChanged event dispatched:",e.detail)},o.hideHand=function(){this.Hand&&(this.Hand.active=!1)},o.GameOver=function(){window.SuperGamespace.isWinning.isWin=!0,window.SuperGamespace.linkStore.linkStore=this.detectPlatform.currentLink,this.dispatchGameStatusChanged(),S.is_hide_download()||this.super_html_script.on_click_game_end(),this.super_html_script.on_click_download(),this.detectPlatform.SwitchToStore()},o.onNoMoreBlock=function(e){var n=this;1===e?(this.scheduleOnce((function(){n.redscreen&&(n.redscreen.active=!0,b.instance.playSFX("warn"),n.scheduleOnce((function(){n.redscreen.active=!1}),2.2)),n.level1&&m(n.level1).delay(.25).to(.5,{scale:new f(0,0,0)}).start(),n.RichtextDownLoad.string="Next Level",n.level2&&n.TweenLevel(n.level2),n.currentLevel=2}),1),this.schedule((function(){n.level1.active=!1}),2)):this.GameOver()},o.TweenLevel=function(e){e.active=!0;var n=e.getComponent(v);n.opacity=0,m(n).delay(1).to(1.8,{opacity:255}).start()},r(n,null,[{key:"instance",get:function(){return this._instance}}]),n}(w))._instance=void 0,O=n((W=I).prototype,"MainCamera",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(W.prototype,"MainCanvas",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(W.prototype,"Hand",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=n(W.prototype,"RichtextDownLoad",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(W.prototype,"level1",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=n(W.prototype,"level2",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=n(W.prototype,"redscreen",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=n(W.prototype,"detectPlatform",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=n(W.prototype,"super_html_script",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=W))||x));o._RF.pop()}}}));

System.register("chunks:///_virtual/Grid.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,i,t,r,o,c,l,u;return{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inheritsLoose,t=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,c=e._decorator,l=e.Node,u=e.Component}],execute:function(){var a,s,p,d,f,h,w,b;o._RF.push({},"28533H1juZCbYAdxWXAwgnv","Grid",void 0);var y=c.ccclass,O=c.property;e("Grid",(a=y("Grid"),s=O(l),p=O(l),a((h=n((f=function(e){function n(){for(var n,i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return n=e.call.apply(e,[this].concat(o))||this,t(n,"special",h,r(n)),t(n,"nodeOwn",w,r(n)),t(n,"specialNode",b,r(n)),n.isOccupied=!1,n}i(n,e);var o=n.prototype;return o.start=function(){var e=this;this.special&&this.scheduleOnce((function(){e.nodeOwn=e.specialNode}),.2)},o.CheckOccupied=function(e){return null!==this.nodeOwn&&this.nodeOwn!==e},o.SetNodeOwn=function(e){this.nodeOwn=e},o.ReBackValue=function(){return this.nodeOwn=null},n}(u)).prototype,"special",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=n(f.prototype,"nodeOwn",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=n(f.prototype,"specialNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=f))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/GridGenerate.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,r,t,n,o,l,a,c,u,d,s;return{setters:[function(e){i=e.applyDecoratedDescriptor,r=e.inheritsLoose,t=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,a=e.Prefab,c=e.instantiate,u=e.Vec3,d=e.Component,s=e.Vec2}],execute:function(){var g,p,f,b,h,z,y,S,w,C;o._RF.push({},"164b2IbbPlCaa9l0XdnwxR5","GridGenerate",void 0);var v=l.ccclass,G=l.property,m=l.executeInEditMode;e("GridGenerate",(g=v("GridGenerate"),p=G({type:a}),g(f=m((h=i((b=function(e){function i(){for(var i,r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return i=e.call.apply(e,[this].concat(o))||this,t(i,"gridPrefab",h,n(i)),t(i,"gridSizeCol",z,n(i)),t(i,"gridSizeRow",y,n(i)),t(i,"cellSize",S,n(i)),t(i,"gridCenter",w,n(i)),t(i,"regenerate",C,n(i)),i}r(i,e);var o=i.prototype;return o.update=function(){},o.generateGrid=function(){this.node.removeAllChildren();for(var e=(this.gridSizeCol-1)*this.cellSize/2,i=(this.gridSizeRow-1)*this.cellSize/2,r=0;r<this.gridSizeRow;r++)for(var t=0;t<this.gridSizeCol;t++){var n=c(this.gridPrefab),o=t*this.cellSize-e+this.gridCenter.x,l=r*this.cellSize-i+this.gridCenter.y;n.setPosition(new u(o,l,0)),this.node.addChild(n)}console.log("✅ Grid generated in Editor.")},i}(d)).prototype,"gridPrefab",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(b.prototype,"gridSizeCol",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 9}}),y=i(b.prototype,"gridSizeRow",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 9}}),S=i(b.prototype,"cellSize",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 75}}),w=i(b.prototype,"gridCenter",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(0,0)}}),C=i(b.prototype,"regenerate",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=b))||f)||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/GridManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var e,r,t,n,l,o,a,s,d,h,c,u;return{setters:[function(i){e=i.applyDecoratedDescriptor,r=i.inheritsLoose,t=i.initializerDefineProperty,n=i.assertThisInitialized,l=i.createClass},function(i){o=i.cclegacy,a=i._decorator,s=i.Prefab,d=i.Node,h=i.Vec2,c=i.instantiate,u=i.Component}],execute:function(){var g,f,z,p,C,b,S,w,y,v,m,P,G,_,R,N,x,W,M;o._RF.push({},"8c06aSOnxRP6IIPg76MNEzS","GridManager",void 0);var D=a.ccclass,F=a.property,A=a.executeInEditMode;i("GridManager",(g=D("GridManager"),f=F({type:s}),z=F({type:s}),p=F(d),C=F({type:h}),b=F([d]),g(S=A(((M=function(i){function e(){for(var e,r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return e=i.call.apply(i,[this].concat(l))||this,t(e,"gridPrefab",y,n(e)),t(e,"wallPrefab",v,n(e)),t(e,"wallContainer",m,n(e)),t(e,"gridSizeCol",P,n(e)),t(e,"gridSizeRow",G,n(e)),t(e,"cellSize",_,n(e)),t(e,"gridCenter",R,n(e)),t(e,"regenerate",N,n(e)),t(e,"regenWall",x,n(e)),t(e,"listGrid",W,n(e)),e.gridNodes=[],e}r(e,i);var o=e.prototype;return o.onLoad=function(){e._instance=this,this.generateGrid2D()},o.update=function(){},o.generateGrid2D=function(){this.node.removeAllChildren(),this.gridNodes=[],this.listGrid=[];for(var i=(this.gridSizeCol-1)*this.cellSize/2,e=(this.gridSizeRow-1)*this.cellSize/2,r=0;r<this.gridSizeRow;r++){for(var t=[],n=0;n<this.gridSizeCol;n++){var l=c(this.gridPrefab),o=n*this.cellSize-i+this.gridCenter.x,a=r*this.cellSize-e+this.gridCenter.y;l.setPosition(o,a),l.name="Grid_"+r+"_"+n,this.node.addChild(l),this.listGrid.push(l),t.push(l)}this.gridNodes.push(t)}console.log("✅ Grid2D generated.")},o.recoverGridFromChildren=function(){this.gridNodes=[],this.listGrid=this.node.children;var i=this.gridSizeRow*this.gridSizeCol;if(this.listGrid.length===i)for(var e=(this.gridSizeCol-1)*this.cellSize/2,r=(this.gridSizeRow-1)*this.cellSize/2,t=0;t<this.gridSizeRow;t++){for(var n=[],l=0;l<this.gridSizeCol;l++){var o=t*this.gridSizeCol+l,a=this.listGrid[o],s=l*this.cellSize-e+this.gridCenter.x,d=t*this.cellSize-r+this.gridCenter.y;a.setPosition(s,d),n.push(a)}this.gridNodes.push(n)}else console.warn("⚠️ Grid count mismatch:",this.listGrid.length,"≠",i)},o.FindNodePosition=function(i){for(var e=0;e<this.gridNodes.length;e++)for(var r=0;r<this.gridNodes[e].length;r++)if(this.gridNodes[e][r]===i)return{row:e,col:r};return null},o.generateWallAroundGrid=function(){if(this.wallContainer){this.wallContainer.removeAllChildren();for(var i=this.cellSize*this.gridSizeCol,e=this.cellSize*this.gridSizeRow,r=this.gridCenter.x-i/2-16.25,t=this.gridCenter.x+i/2+16.25,n=this.gridCenter.y+e/2+16.25,l=this.gridCenter.y-e/2-16.25,o=0;o<this.gridSizeRow;o++){var a=o*this.cellSize-(this.gridSizeRow-1)*this.cellSize/2+this.gridCenter.y,s=c(this.wallPrefab);s.setPosition(r,a),s.name="Wall_Left_"+o,this.wallContainer.addChild(s);var d=c(this.wallPrefab);d.setPosition(t,a),d.name="Wall_Right_"+o,this.wallContainer.addChild(d)}for(var h=0;h<this.gridSizeCol;h++){var u=h*this.cellSize-(this.gridSizeCol-1)*this.cellSize/2+this.gridCenter.x,g=c(this.wallPrefab);g.setPosition(u,n),g.setRotationFromEuler(0,0,90),g.name="Wall_Top_"+h,this.wallContainer.addChild(g);var f=c(this.wallPrefab);f.setPosition(u,l),f.setRotationFromEuler(0,0,90),f.name="Wall_Bottom_"+h,this.wallContainer.addChild(f)}console.log("🧱 Walls created inside wallContainer.")}},l(e,null,[{key:"instance",get:function(){return this._instance}}]),e}(u))._instance=void 0,y=e((w=M).prototype,"gridPrefab",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(w.prototype,"wallPrefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(w.prototype,"wallContainer",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(w.prototype,"gridSizeCol",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 9}}),G=e(w.prototype,"gridSizeRow",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 9}}),_=e(w.prototype,"cellSize",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 65}}),R=e(w.prototype,"gridCenter",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h(0,0)}}),N=e(w.prototype,"regenerate",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=e(w.prototype,"regenWall",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),W=e(w.prototype,"listGrid",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=w))||S)||S));o._RF.pop()}}}));

System.register("chunks:///_virtual/InputManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./BlockManager.ts","./Block.ts","./SoundManager.ts","./Door.ts"],(function(t){var o,n,e,i,s,r,c,a,h,l,u,d,f,p,g,T;return{setters:[function(t){o=t.inheritsLoose,n=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy,i=t._decorator,s=t.input,r=t.Input,c=t.Vec3,a=t.Vec2,h=t.PhysicsSystem2D,l=t.math,u=t.Component},function(t){d=t.GameManager},function(t){f=t.BlockManager},function(t){p=t.Block},function(t){g=t.SoundManager},function(t){T=t.Door}],execute:function(){var v;e._RF.push({},"a82a3zHIdlMKJJUKRgHmLdr","InputManager",void 0);var m=i.ccclass;i.property,t("InputManager",m("InputManager")(v=function(t){function e(){for(var o,n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return(o=t.call.apply(t,[this].concat(e))||this).nodeDetect=null,o.offset=new c,o.checkFirst=!1,o.blinkingDoors=[],o}o(e,t);var i=e.prototype;return i.onLoad=function(){s.on(r.EventType.TOUCH_START,this.onTouchStart,this),s.on(r.EventType.TOUCH_MOVE,this.onTouchMove,this),s.on(r.EventType.TOUCH_END,this.onTouchEnd,this),s.on(r.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},i.onDestroy=function(){s.off(r.EventType.TOUCH_START,this.onTouchStart,this),s.off(r.EventType.TOUCH_MOVE,this.onTouchMove,this),s.off(r.EventType.TOUCH_END,this.onTouchEnd,this),s.off(r.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},i.getWorldPosFromTouch=function(t){var o=t.getUILocation(),n=new c;return d.instance.MainCamera.screenToWorld(n.set(o.x,o.y,0)),n},i.onTouchStart=function(t){if(g.instance.playSFX("touch"),d.instance.checkCanTouch&&(this.checkFirst||(d.instance.hideHand(),this.checkFirst=!0),!(f.instance.blockUsedCount<=0))){var o=this.getBlockByRaycast(t),n=null==o?void 0:o.getComponent(p);if(o&&n&&n.canMove){this.nodeDetect=o,n.oldPosition=o.getWorldPosition().clone();var e=this.node.scene.getComponentsInChildren(T);this.blinkingDoors=e.filter((function(t){return t.type===n.type})),this.blinkingDoors.forEach((function(t){return t.startBlinkEffect()}));var i=this.getWorldPosFromTouch(t),s=o.getWorldPosition();c.subtract(this.offset,s,i),n.SetBorder()}else this.nodeDetect=null}},i.getBlockByRaycast=function(t){t.getUILocation();for(var o,e=this.getWorldPosFromTouch(t),i=new a(e.x,e.y),s=h.instance.testPoint(i),r=n(s);!(o=r()).done;){var c=o.value.node;if(c.getComponent(p))return c}return null},i.onTouchEnd=function(t){if(this.nodeDetect){var o=this.nodeDetect.getComponent(p);o&&(o.setToClosestGrid(),o.isOverlappingOtherBlock()&&(this.nodeDetect.setWorldPosition(o.oldPosition),o.InitDataOfListNodeOwnFrame()),o.ClearBorder()),this.nodeDetect=null,this.blinkingDoors.forEach((function(t){return t.stopBlinkEffect()})),this.blinkingDoors=[]}},i.onTouchMove=function(t){if(this.nodeDetect&&this.nodeDetect.isValid){var o=this.nodeDetect.getComponent(p);if(o){var n=this.getWorldPosFromTouch(t),e=new c;c.add(e,n,this.offset),o.InitDataOfListNodeOwnFrame();var i=o.getMoveLimit(),s=o.getWorldLimitPosition(i);if(!s.min.equals(s.max)){var r=l.clamp(e.x,s.min.x,s.max.x),a=l.clamp(e.y,s.min.y,s.max.y),h=this.nodeDetect.getWorldPosition(),u=new c(l.lerp(h.x,r,.4),l.lerp(h.y,a,.4),0);this.nodeDetect.setWorldPosition(u);var d=this.nodeDetect.getComponent(p);d&&d.isOverlappingOtherBlock()&&(this.nodeDetect.setWorldPosition(d.oldPosition),d.InitDataOfListNodeOwnFrame())}}}},e}(u))||v);e._RF.pop()}}}));

System.register("chunks:///_virtual/LogoEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,e,n,c,i,s,r;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,c=t.UIOpacity,i=t.tween,s=t.Vec3,r=t.Component}],execute:function(){var a;e._RF.push({},"fda75FvBfRMo6Lox6/+YM8b","LogoEffect",void 0);var f=n.ccclass;n.property,t("LogoEffect",f("LogoEffect")(a=function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){var t=this;this.node.setPosition(0,500),this.node.setScale(.3,.3),this.node.getComponent(c)||this.node.addComponent(c);var o=this.node.getComponent(c);o.opacity=255,i(this.node).to(.5,{position:new s(0,0,0),scale:new s(.8,.8,0)}).call((function(){i(o).to(1,{opacity:0}).call((function(){t.node.active=!1})).start()})).start()},e}(r))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Block.ts","./Door.ts","./Grid.ts","./PosCheck.ts","./BlockManager.ts","./GameManager.ts","./GridManager.ts","./InputManager.ts","./GridGenerate.ts","./LogoEffect.ts","./SoundManager.ts","./TextEffect.ts","./Enum.ts","./DetectPlatform.ts","./StoreLinkOS.ts","./Super_html_script.ts","./super_html_playable.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PosCheck.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GridManager.ts","./Grid.ts"],(function(e){var n,o,t,i,r,a,s,c,l,u,d,p;return{setters:[function(e){n=e.applyDecoratedDescriptor,o=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,s=e._decorator,c=e.Node,l=e.Vec3,u=e.Component},function(e){d=e.GridManager},function(e){p=e.Grid}],execute:function(){var h,f,w,g,C,m,O;a._RF.push({},"68cf2WRCm1PpJ10Km7gSPoC","PosCheck",void 0);var v=s.ccclass,P=s.property;e("PosCheck",(h=v("PosCheck"),f=P(c),h((C=n((g=function(e){function n(){for(var n,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=e.call.apply(e,[this].concat(r))||this,t(n,"rowOwn",C,i(n)),t(n,"colOwn",m,i(n)),t(n,"nodeCloset",O,i(n)),n.minDistance=65,n}o(n,e);var a=n.prototype;return a.onLoad=function(){this.InitDataPos()},a.InitDataPos=function(){var e,n=this.FindNodeCloset();if(n){var o=d.instance.FindNodePosition(n);if(o){var t=null==(e=d.instance.gridNodes[this.rowOwn])?void 0:e[this.colOwn];t&&t.getComponent(p).nodeOwn===this.node.parent&&t.getComponent(p).ReBackValue(),this.rowOwn=o.row,this.colOwn=o.col,d.instance.gridNodes[o.row][o.col].getComponent(p).SetNodeOwn(this.node.parent)}}else console.warn("⚠️ Không tìm được nodeCloset cho "+this.node.name)},a.ReBackValue=function(){d.instance.gridNodes[this.rowOwn][this.colOwn].getComponent(p).ReBackValue()},a.FindNodeCloset=function(){for(var e,n=null,o=Number.MAX_VALUE,t=this.node.getWorldPosition(),i=r(d.instance.listGrid);!(e=i()).done;){var a=e.value,s=a.getWorldPosition(),c=l.distance(t,s),u=a.getComponent(p),h=u.nodeOwn===this.node.parent;c<this.minDistance&&(!u.CheckOccupied()||h)&&c<o&&(o=c,n=a)}return this.nodeCloset=n,n},n}(u)).prototype,"rowOwn",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=n(g.prototype,"colOwn",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=n(g.prototype,"nodeCloset",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=g))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/SoundManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var n,e,t,i,u,r,c,l,s,a,d,h,p;return{setters:[function(o){n=o.applyDecoratedDescriptor,e=o.inheritsLoose,t=o.initializerDefineProperty,i=o.assertThisInitialized},function(o){u=o.cclegacy,r=o._decorator,c=o.Node,l=o.AudioSource,s=o.input,a=o.Input,d=o.resources,h=o.AudioClip,p=o.Component}],execute:function(){var f,g,m,S,b,y,M,_,v,B;u._RF.push({},"3bc80zSEfFFapoRD+8CJ1BH","SoundManager",void 0);var x=r.ccclass,G=r.property;o("SoundManager",(f=x("SoundManager"),g=G(c),m=G(c),S=G(c),f(((B=function(o){function n(){for(var n,e=arguments.length,u=new Array(e),r=0;r<e;r++)u[r]=arguments[r];return(n=o.call.apply(o,[this].concat(u))||this).isMuted=!1,n.bgmSource=null,n.sfxSource=null,t(n,"bgmNode",M,i(n)),t(n,"sfxTouchNode",_,i(n)),t(n,"sfxDoorNode",v,i(n)),n._pendingBGMPath=null,n._audioUnlocked=!1,n}e(n,o);var u=n.prototype;return u.onLoad=function(){n.instance=this,this.bgmSource=this.bgmNode.getComponent(l),this.sfxSource=this.sfxTouchNode.getComponent(l),this.sfxDoorNode.getComponent(l),s.once(a.EventType.TOUCH_START,this.unlockAudio,this)},u.unlockAudio=function(){this._audioUnlocked=!0,console.log("🔊 Audio unlocked"),this._pendingBGMPath&&(this._playBGMInternal(this._pendingBGMPath),this._pendingBGMPath=null)},u.toggleMute=function(){this.isMuted=!this.isMuted,this.bgmSource.volume=this.isMuted?0:1,this.sfxSource.volume=this.isMuted?0:1},u.playBGM=function(o){this._audioUnlocked?this._playBGMInternal(o):this._pendingBGMPath=o},u._playBGMInternal=function(o){var n=this;d.load("Sound/"+o,h,(function(e,t){!e&&t?(n.bgmSource.clip=t,n.bgmSource.loop=!0,n.bgmSource.play()):console.warn("Không tìm thấy nhạc nền:",o)}))},u.playSFX=function(o){var n=this;this._audioUnlocked&&d.load("audio/"+o,h,(function(e,t){!e&&t?n.sfxSource.playOneShot(t,1):console.warn("Không tìm thấy sound effect:",o)}))},u.stopBGM=function(){this.bgmSource.stop()},n}(p)).instance=void 0,M=n((y=B).prototype,"bgmNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(y.prototype,"sfxTouchNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(y.prototype,"sfxDoorNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=y))||b));u._RF.pop()}}}));

System.register("chunks:///_virtual/StoreLinkOS.ts",["cc"],(function(o){var t;return{setters:[function(o){t=o.cclegacy}],execute:function(){t._RF.push({},"93883Nil3NCnaNw+vgxpUgB","StoreLinkOS",void 0);o("StoreLinkOS",{ANDROID_LINK:"https://play.google.com/store/apps/details?id=com.slide.block.color.jam.out&hl=en",IOS_LINK:"https://apps.apple.com/sg/app/color-block-out/id6743066302"});t._RF.pop()}}}));

System.register("chunks:///_virtual/super_html_playable.ts",["cc"],(function(e){var o;return{setters:[function(e){o=e.cclegacy}],execute:function(){o._RF.push({},"cb874SZ+I9BC60qfByM/G07","super_html_playable",void 0);var l=e("super_html_playable",function(){function e(){}var o=e.prototype;return o.download=function(){console.log("download"),window.super_html&&super_html.download()},o.game_end=function(){console.log("game end"),window.super_html&&super_html.game_end()},o.is_hide_download=function(){return!(!window.super_html||!super_html.is_hide_download)&&super_html.is_hide_download()},o.set_google_play_url=function(e){window.super_html&&(super_html.google_play_url=e)},o.set_app_store_url=function(e){window.super_html&&(super_html.appstore_url=e)},e}());e("default",new l);o._RF.pop()}}}));

System.register("chunks:///_virtual/Super_html_script.ts",["./rollupPluginModLoBabelHelpers.js","cc","./super_html_playable.ts","./StoreLinkOS.ts"],(function(t){var e,n,o,r,c,_;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.Component},function(t){c=t.default},function(t){_=t.StoreLinkOS}],execute:function(){var i;n._RF.push({},"5fde3sp0p1GYrAyQZTgQ5Ga","Super_html_script",void 0);var u=o.ccclass;o.property,t("Super_html_script",u("Super_html_script")(i=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.onLoad=function(){c.set_google_play_url(_.ANDROID_LINK),c.set_app_store_url(_.IOS_LINK),c.is_hide_download()},o.on_click_game_end=function(){c.game_end()},o.on_click_download=function(){c.download()},n}(r))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/TextEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundManager.ts"],(function(t){var e,i,r,n,s,o,a,c,l,p,f,h,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,o=t._decorator,a=t.SpriteFrame,c=t.Node,l=t.CCString,p=t.Sprite,f=t.Animation,h=t.Component},function(t){u=t.SoundManager}],execute:function(){var d,g,v,m,N,y,b,L,x,S,M;s._RF.push({},"5fea8BrRipP+rwJhF7C1Prm","TextEffect",void 0);var w=o.ccclass,C=o.property;t("TextEffect",(d=w("TextEffect"),g=C([a]),v=C(c),m=C([l]),N=C(c),d((L=e((b=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s))||this,r(e,"spriteList",L,n(e)),r(e,"spriteNode",x,n(e)),e.textSprite=null,r(e,"voiceList",S,n(e)),r(e,"effectNode",M,n(e)),e.anim=null,e.lastIndex=-1,e}i(e,t);var s=e.prototype;return s.start=function(){this.spriteNode.active=!1,this.effectNode.active=!1,this.textSprite=this.spriteNode.getComponent(p),this.anim=this.spriteNode.getComponent(f)},s.playRandomEffect=function(){if(0!==this.spriteList.length&&this.spriteList.length===this.voiceList.length&&this.effectNode){var t=Math.floor(Math.random()*this.spriteList.length);if(this.spriteList.length>1)for(;t===this.lastIndex;)t=Math.floor(Math.random()*this.spriteList.length);this.lastIndex=t,this.textSprite.spriteFrame=this.spriteList[t];var e=this.voiceList[t];u.instance.playSFX(e),this.effectNode.active=!0,this.spriteNode.active=!0,this.anim&&this.anim.play("Text"),this.hideSpriteNode()}else console.warn("Missing input: sprite list, rich sprite or effect node")},s.hideSpriteNode=function(){var t=this;this.unscheduleAllCallbacks(),this.schedule((function(){t.effectNode.active=!1,t.spriteNode.active=!1}),1.25)},e}(h)).prototype,"spriteList",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=e(b.prototype,"spriteNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(b.prototype,"voiceList",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=e(b.prototype,"effectNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=b))||y));s._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});